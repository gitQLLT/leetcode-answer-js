<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <script>
      // 方法1：两遍扫描
      // 时间复杂度：O(N) 空间复杂度O(1)
      var nextPermutation = function (nums) {
        if (nums.length < 2) return nums;
        let len = nums.length;
        let i = len - 2;
        let j = len - 1;
        let k = len - 1;
        // 寻找从数组末尾开始的第一个升序的i,j
        while (i >= 0 && nums[i] >= nums[j]) {
          i--;
          j--;
        }
        // 说明数组是降序排列的
        if (i < 0) return nums.sort((a, b) => a - b);
        // 从数组末尾寻找第一个比nums[i]大的值
        // 注意边界和相等问题
        while (k > i && nums[i] >= nums[k]) {
          k--;
        }
        // 交换i，k处的值
        swap(nums, i, k);
        // j后的数据现在肯定是降序排列,转化为升序排列
        // 收尾依次交换位置即可
        while (len > j) {
          swap(nums, j, len - 1);
          len--;
          j++;
        }

        function swap(nums, i, k) {
          let temp = nums[i];
          nums[i] = nums[k];
          nums[k] = temp;
        }

        return nums;
      };

      // test
      var  nums1 = [1,2,3];
      var  nums2 = [3,2,1];
      var  nums3 = [1,1,5];
      console.log(nextPermutation(nums1));
      console.log(nextPermutation(nums2));
      console.log(nextPermutation(nums3));
    </script>
  </body>
</html>
